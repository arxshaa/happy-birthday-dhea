<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blow The Candles</title>
    <link rel="icon" type="image/png" href="image/kue.png">
    <link rel="stylesheet" href="page1.css">
</head>
<body>
    <nav class="navbar">
        <h1 class="birthdate">27/01/07</h1>
        <img src="image/kue.png" alt="Cake Icon" class="navbar-icon">
        <h1 class="name">Dhea Nafisa</h1>
    </nav>

    <div class="balloon-container">
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
    </div>

    <div class="birthday-message">
        <h1>Happy Birthday Dhea!</h1>
    </div>

    <div class="gift-container">
        <div class="gift-box">
            <div class="gift-lid"></div>
            <div class="gift-body"></div>
            <div class="pop-paper" style="--x: -50px; --y: -80px; --r: -20deg; --color: #ffeb3b;"></div>
            <div class="pop-paper" style="--x: 50px; --y: -90px; --r: 20deg; --color: #00bcd4;"></div>
            <div class="pop-paper" style="--x: -30px; --y: -120px; --r: -45deg; --color: #ff4081;"></div>
            <div class="pop-paper" style="--x: 30px; --y: -110px; --r: 45deg; --color: #8bc34a;"></div>
            <div class="pop-paper" style="--x: 0px; --y: -150px; --r: 0deg; --color: #e040fb;"></div>
        </div>
    </div>

    <div class="letter-paper">
        <p id="typing-text"></p>
        <div class="safe-container">
            <a href="page2.html" class="safe-link">
                <div class="safe-icon-css">
                    <div class="safe-door">
                        <div class="safe-dial"></div>
                        <div class="safe-handle"></div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="cake-container">
        <div class="candles">
            <div class="candle-num">
                1
                <div class="flame"></div>
            </div>
            <div class="candle-num">
                9
                <div class="flame"></div>
            </div>
        </div>
        <div class="cake-layer layer-strawberry"></div>
        <div class="cake-layer layer-vanilla"></div>
        <div class="cake-layer layer-chocolate"></div>
        <div class="plate"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script>
        let candlesBlown = 0;
        const totalCandles = 2;
        const message = document.querySelector('.birthday-message');
        const giftContainer = document.querySelector('.gift-container');
        const letterPaper = document.querySelector('.letter-paper');

        document.querySelectorAll('.flame').forEach(flame => {
            flame.addEventListener('click', function() {
                if (!this.classList.contains('off')) {
                    this.classList.add('off');
                    candlesBlown++;

                    if (candlesBlown === totalCandles) {
                        // Efek confetti dari kiri dan kanan
                        confetti({ particleCount: 100, spread: 70, origin: { x: 0, y: 0.6 } });
                        confetti({ particleCount: 100, spread: 70, origin: { x: 1, y: 0.6 } });

                        // Tampilkan pesan
                        setTimeout(() => {
                            message.classList.add('show');
                            giftContainer.classList.add('show'); // Tampilkan kado
                            document.querySelector('.cake-container').classList.add('hide');
                        }, 500);
                    }
                }
            });
        });

        const fullText = `Dear Dhea,

Hai!, selamat ulang tahun yaa. Semoga kamu dan ibu sehat selalu, intinya semoga semua yang kamu semogakan bisa terwujud ya! entah di tahun ini atau tahun-tahun berikutnya. Semoga kamu ga berlarut ya sama kesedihan yang udah berlalu. Jujur aku ikut sedih pas tau kamu ga keterima di kampus itu. Dan setelah tau kamu keterima di PT. KAI rasanya aku juga ikut seneng, ikut bangga aku. Proud of you! Kamu kuat, aku tau itu. Jangan anggap kegagalan itu sebagai hambatan, tapi jadiin itu sebagai pelajaran (sok bijak banget anjir). Aku tau ini kesannya tiba-tiba banget, "tapi mau kapan lagi momennya?" itu si yang ada di pikiran aku, makanya aku gamau kehilangan kesempatan ini. Sekali lagi selamat ulang tahun ya.`;
        const typingElement = document.getElementById('typing-text');
        let charIndex = 0;
        let isTypingStarted = false;

        function typeWriter() {
            if (charIndex < fullText.length) {
                typingElement.innerHTML += fullText.charAt(charIndex) === '\n' ? '<br>' : fullText.charAt(charIndex);
                charIndex++;
                setTimeout(typeWriter, 20);
                const paper = document.querySelector('.letter-paper');
                paper.scrollTop = paper.scrollHeight;
            } else {
                document.querySelector('.safe-container').classList.add('visible');
            }
        }

        giftContainer.addEventListener('click', function() {
            if (!this.classList.contains('open')) {
                this.classList.add('open');
                letterPaper.classList.add('open');
                if (!isTypingStarted) {
                    isTypingStarted = true;
                    setTimeout(typeWriter, 1000);
                }
            } else {
                this.classList.remove('open');
                letterPaper.classList.remove('open');
            }
        });
    </script>

    
</body>
</html>